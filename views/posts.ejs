<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>All Posts</title>
  <link rel="stylesheet" href="/styles.css" />
</head>

<body>
  <%- include("partials/navbar") %>

  <h1>üìù Blog Posts</h1>

  <ul>
    <% posts.forEach(post => { %>
      <li>
        <h2><%= post.title %></h2>
        <p><%= post.content %></p>
        <small>Category: <%= post.category %></small><br />
        <small>Author: <%= post.authorName %> <%= post.authorAvatar %></small><br />
        <small>Posted on: <%= new Date(post.createdAt).toLocaleString() %></small>

        <hr />

        <!-- üìù Comment Form -->
        <form action="/comments" method="POST">
          <input type="hidden" name="postId" value="<%= post.id %>" />

          <label for="text">Leave a comment:</label><br />
          <textarea name="text" required></textarea><br />

          <label for="userId">Your User ID:</label><br />
          <input type="number" name="userId" required /><br />

          <button type="submit">Post Comment</button>
        </form>
      </li>
    <% }) %>
  </ul>
</body>

</html>
